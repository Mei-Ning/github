<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        .container {
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
        }

        .img {
            height: 55%;
            background-color: lavender;
        }

        .card {
            width: 300px;
            height: 350px;
            border: 1px solid #000;
            border-radius: 5px;
            margin: 0 5px 15px;
        }
    </style>
</head>

<body>
    <div class="container"></div>

    <script>
        const url = 'https://opendata.cwb.gov.tw/api/v1/rest/datastore/F-C0032-001?Authorization=CWB-FA20DEE2-695A-48AC-9B77-AF6FF43745C9';
        const countries = ['臺北市', '新北市', '基隆市', '宜蘭縣', '桃園市', '新竹縣', '新竹市', '苗栗縣', '臺中市', '彰化縣', '南投縣', '雲林縣', '嘉義縣', '嘉義市', '臺南市', '高雄市', '屏東縣', '花蓮縣', '臺東縣', '連江縣', '金門縣', '澎湖縣'];

        fetch(url)
            .then(function (response) {
                return response.json();
            })
            .then(function (data) {
                let locations = data['records']['location'];
                let weatherData = {};

                locations.forEach(function (location) {
                    weatherData[location['locationName']] = {};
                    let weatherElements = location['weatherElement'];
                    weatherElements.forEach(function (weatherElement) {
                        weatherData[location['locationName']][weatherElement['elementName']] = weatherElement['time'][0]['parameter']['parameterName'];
                    });
                    console.log(weatherData);

                    const containerElement = document.querySelector('.container');
                    let cards = '';

                    countries.forEach(function (country) {
                        cards += `
                        <div class="card">
                            <div class="img"></div>
                            <div class="locationName">${country}</div>
                            <div class="weatherName">${weatherData[country]['Wx']}</div>
                            <div class="rainProbability">降雨機率：${weatherData[country]['PoP']}%</div>
                            <div class="lowestTemperature">最低溫：${weatherData[country]['MinT']}℃</div>
                            <div class="highestTemperature">最高溫：${weatherData[country]['MaxT']}℃</div>
                            <div class="highestTemperature">舒適度：${weatherData[country]['CI']}</div>
                        </div>`;
                    });
                    containerElement.innerHTML = cards;
                });
    </script>
</body>

</html>